<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestionnaire de Rapaces</title>
    <style>
        /* ... m√™mes styles que ton fichier original ... */
    </style>
</head>
<body>
<div class="container">
    <div class="header">
        <h1>ü¶Ö Gestionnaire de Rapaces</h1>
        <p>Suivi quotidien de vos compagnons ail√©s</p>
        <p id="weather-info" style="color: #555; font-size: 14px; margin-top: 10px;">üå¶Ô∏è Chargement m√©t√©o...</p>
    </div>

    <!-- ... m√™me structure d'onglets ... -->

</div>

<script>
const API_KEY = 'a4c05168c0c277b28e6e94438dbb630c';

let rapaces = JSON.parse(localStorage.getItem('rapaces') || '[]');
let entries = JSON.parse(localStorage.getItem('entries') || '[]');
let currentWeather = null;

// Obtenir la m√©t√©o avec la g√©olocalisation
navigator.geolocation.getCurrentPosition(pos => {
    const { latitude, longitude } = pos.coords;
    fetch(`https://api.openweathermap.org/data/2.5/weather?lat=${latitude}&lon=${longitude}&appid=${API_KEY}&units=metric&lang=fr`)
        .then(r => r.json())
        .then(data => {
            currentWeather = `${data.weather[0].description}, ${data.main.temp.toFixed(1)}¬∞C`;
            document.getElementById('weather-info').textContent = `üå§Ô∏è M√©t√©o : ${currentWeather}`;
        })
        .catch(() => {
            document.getElementById('weather-info').textContent = '‚ùå Impossible de charger la m√©t√©o';
        });
}, () => {
    document.getElementById('weather-info').textContent = '‚ùå Acc√®s √† la position refus√©';
});

function saveData() {
    localStorage.setItem('rapaces', JSON.stringify(rapaces));
    localStorage.setItem('entries', JSON.stringify(entries));
}

function addEntry() {
    const rapaceId = document.getElementById('rapace-select').value;
    const type = document.getElementById('event-type').value;
    const value = document.getElementById('event-value').value;
    const time = document.getElementById('event-time').value;
    const notes = document.getElementById('event-notes').value;

    if (!rapaceId || !value || !time) {
        alert('Merci de remplir tous les champs requis');
        return;
    }

    const entry = {
        id: Date.now(),
        rapaceId: parseInt(rapaceId),
        type,
        value,
        time,
        notes,
        weather: currentWeather || 'M√©t√©o non dispo',
        date: new Date().toISOString()
    };

    entries.push(entry);
    saveData();
    updateEntryList();
    document.getElementById('event-value').value = '';
    document.getElementById('event-notes').value = '';
}

function updateEntryList() {
    const selectedRapaceId = document.getElementById('rapace-select').value;
    const entryList = document.getElementById('entry-list');
    if (!selectedRapaceId) return;

    const list = entries
        .filter(e => e.rapaceId == selectedRapaceId)
        .sort((a, b) => new Date(b.date) - new Date(a.date));

    entryList.innerHTML = '';
    if (list.length === 0) {
        entryList.innerHTML = '<p style="text-align:center">Aucune entr√©e</p>';
        return;
    }

    list.forEach(entry => {
        const div = document.createElement('div');
        div.className = 'entry-item';

        const d = new Date(entry.date);
        const formattedDate = d.toLocaleDateString('fr-FR') + ' √† ' + entry.time;

        div.innerHTML = `
            <div class="date">${formattedDate} ‚Ä¢ ${entry.weather}</div>
            <div class="content">
                <strong>${entry.type}</strong> : ${entry.value}<br>
                ${entry.notes ? `<em>${entry.notes}</em>` : ''}
            </div>
        `;
        entryList.appendChild(div);
    });
}

// Les autres fonctions (addRapace, updateRapaceSelects, updateStats...) restent identiques

</script>
</body>
</html>
